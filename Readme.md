# Statistics.py

初歩的な統計的推定・検定を簡単に実行できるツール．

## 機能
### 推定
* 平均値の区間推定(母分散既知)
* 平均値の区間推定(母分散未知)
* 母分散の区間推定

## 使い方
まずCSVファイルに対象となるデータを書き込んでおく．
```
6.0, 8.5, 4.1, 4.9, 5.2, 7.1
```

### 基本的な統計量(descrive)
データ数・標本平均・標本分散・不偏分散を算出して表示する．
```
$ python main.py desc -f test.csv
系列1
データ数: 6
標本平均: 5.966666666666666
標本分散: 2.1522222222222216
不偏分散: 2.582666666666666
```
ファイルを指定しない場合は`data.csv`を読みにいく．

CSVファイルに複数行に分けてデータを記録すると，各行ごとに計算を行う．
```
$ python describe.py -f test.csv
系列1
データ数: 6
標本平均: 5.966666666666666
標本分散: 2.1522222222222216
不偏分散: 2.582666666666666

系列2
データ数: 8
標本平均: 4.2
標本分散: 2.8125
不偏分散: 3.2142857142857144
```

### 推定
なにも指定しなくても推定は3種類同時に行われる．
```
$ python estimation.py -p 5.0 -c 0.95
系列1
母平均の95%信頼区間(母分散既知): [ 4.177472522949508, 7.755860810383823 ]
母平均の95%信頼区間(母分散未知): [ 4.280152521665077, 7.653180811668255 ]
母分散の95%信頼区間          : [ 1.0062989539639977, 15.53555451320764 ]
```
`-p`: 既知の母分散．省略すると母分散既知の母平均推定は行われない．  
`-c`: 信頼係数(default: 0.95)．

### 検定
#### 平均の検定
帰無仮説 H_0: `μ = μ_0`の検定を行う．  
```
python stats_test_mean.py --help                   
Usage: stats_test_mean.py [OPTIONS]

Options:
  -z, --z_test                    既知の母分散を使うかどうか
  -n INTEGER                      データの大きさ
  -h, --hypothesis FLOAT          帰無仮説で等しいと仮定する平均
  -m, --mean FLOAT                標本平均
  -vr, --variance FLOAT           既知の母分散/標本分散
  -sd, --stdev FLOAT              既知の母標準偏差/標本標準偏差
  -l, --level FLOAT               有意水準(default: 0.05)
  -s, --side [double|left|right]  検定方法(両側，左片側，右片側)
  --help                          Show this message and exit.
```
`-vr`と`-sd`はどちらか一方を指定すればよい．  
母分散既知の場合は正規分布を使用する．オプションとして`-z`をつけて実行する:
```
$ python stats_test_mean.py -z -n 30 -h 60 -m 56.75 -sd 15
実現値: -1.18673220792786
帰無仮説 'μ = 60.0' は採択されました
```
母分散未知の場合はt分布を使用する:
```
python stats_test_mean.py -n 10 -h 12 -m 12.36 -vr 0.910
実現値: 1.13214762365967
帰無仮説 'μ = 12.0' は採択されました
```

### 平均の差の検定
帰無仮説 H_0: `μ_1 = μ_2`の検定を行う．
```
python stats_test_mean_diff.py --help
Usage: stats_test_mean_diff.py [OPTIONS]

Options:
  -z, --z_test             既知の母分散を使うかどうか
  -b, --big_sample         サンプル数が十分大きいとみなして正規分布を使うかどうか
  -n1 INTEGER              1つめの標本のデータの大きさ
  -m1, --mean1 FLOAT       1つめの標本の標本平均
  -vr1, --variance1 FLOAT  1つめの標本の既知の母分散/標本分散
  -sd1, --stdev1 FLOAT     1つめの標本の既知の母標準偏差/標本標準偏差
  -n2 INTEGER              2つめの標本のデータの大きさ
  -m2, --mean2 FLOAT       2つめの標本の標本平均
  -vr2, --variance2 FLOAT  2つめの標本の既知の母分散/標本分散
  -sd2, --stdev2 FLOAT     2つめの標本の既知の母標準偏差/標本標準偏差
  -l, --level FLOAT        有意水準(default: 0.05)
  --help                   Show this message and exit.
```
標準偏差と分散のオプションはどちらか一方を指定すればよい．  
母分散既知の場合は正規分布を使用する．オプションとして`-z`をつけて実行する:
```
python stats_test_mean_diff.py -z -n1 40 -m1 103 -sd1 15 -n2 35 -m2 101 -sd2 15
実現値: 0.5760658398584765
帰無仮説 'μ1 = μ2' は採択されました
```
母分散未知で分散が等しいとみなせる場合はt分布を使用する:
```
python stats_test_mean_diff.py -n1 15 -m1 68.4 -sd1 10.2 -n2 21 -m2 64.3 -sd2 9.3
実現値: 1.2169392110479802
帰無仮説 'μ1 = μ2' は採択されました
```
母分散未知でサンプル数が十分に大きい場合は正規分布を使用する．オプションとして`-b`をつけて実行する:
```
python stats_test_mean_diff.py -b -n1 120 -m1 83.2 -sd1 16.8 -n2 90 -m2 74.5 -sd2 12.5
実現値: 4.282347279436892
帰無仮説 'μ1 = μ2' は棄却されました
```
